function e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let t=document.querySelector(".wrapper");class r{get squares(){return this.projectSquares.length+this.placeholderSquares.length}get cols(){return this._cols}set cols(e){e!=this._cols&&(this._cols=e,this._rebalance())}get rows(){return this.squares/this.cols}_addSquare(){let e=document.createElement("div"),r=document.createElement("div"),s=document.createElement("div"),o=document.createElement("span");r.classList.add("title"),s.classList.add("desc"),o.classList.add("colhex"),e.classList.add("box"),e.append(r,s,o),e.addEventListener("click",this.regenColors.bind(this,!1)),t.appendChild(e),this.placeholderSquares.push(e)}_removeSquare(){this.placeholderSquares.pop()?.remove()}_rebalance(){let e=this.squares,t=Math.max(this._cols*r._MIN_ROWS,this.projectSquares.length);if(t=Math.ceil(t/this._cols)*this._cols,e!=t){if(e>t)for(let r=e;r>t;r--)this._removeSquare();else if(e<t)for(let r=e;r<t;r++)this._addSquare();this.regenColors(!0)}}forEach(e){let t=0;for(let r of this.projectSquares)e(r,t++);for(let r of this.placeholderSquares)e(r,t++)}regenColors(e=!1){e||(this.corners=Array.from({length:4},(()=>function(e=0,t=256){return Array.from({length:3},(()=>function(e,t){return Math.floor(Math.random()*(t-e))+e}(e,t)))}(80))));let t=this.corners;if(this._cols<3){let r=[t[2],t[1]];this.assignColors((e=>function(e,t){let[r,o]=[i([0,0],t),i([s.rows-1,s.cols-1],t)],l=[o/(r+o),r/(r+o)];return Array.from({length:3},((t,r)=>{let s=n(e.map((e=>e[r])),l).map((([e,t])=>t*e*e)).reduce(((e,t)=>e+t));return Math.round(Math.sqrt(s))}))}(r,o(e))),e)}else this.assignColors((e=>function(e,t){let r=function(e,t){let[r,s]=t,[o,l]=[e.slice(0,2),e.slice(2,4)];return a([a(l,r),a(o,r)],s)}([[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],t);return Array.from({length:3},((t,s)=>{let o=n(e.map((e=>e[s])),r).map((([e,t])=>t*e*e)).reduce(((e,t)=>e+t));return Math.round(Math.sqrt(o))}))}(t,function(e){let[t,r]=o(e);return[t/(s.rows-1),r/(s.cols-1)]}(e))),e)}assignColors(e,t=!1){s.forEach(((r,s)=>{let o=e(s);t&&(r.classList.add("no-transition"),r.offsetHeight),r.style.backgroundColor=l(o),r.querySelector(".colhex").textContent=l(o)})),t&&requestAnimationFrame((()=>{requestAnimationFrame((()=>{s.forEach((e=>{e.classList.remove("no-transition")}))}))}))}constructor(){e(this,"corners",[[119,119,119],[119,119,119],[119,119,119],[119,119,119]]),this._cols=+getComputedStyle(document.documentElement).getPropertyValue("--cols"),this.projectSquares=[...t.querySelectorAll("a")];for(let e of this.projectSquares){let t=document.createElement("span");t.classList.add("colhex"),e.appendChild(t),e.classList.add("box")}this.placeholderSquares=[];for(let e=this.squares;e<this.cols*r._MIN_ROWS;e++)this._addSquare()}}e(r,"_MIN_ROWS",3);let s=new r;function o(e){return[Math.floor(e/s.cols),e%s.cols]}function l(e){return`#${e.map((e=>Math.round(e).toString(16).padStart(2,"0"))).join("")}`}function n(...e){let t=e[0].length;return Array.from({length:t},((t,r)=>e.map((e=>e[r]))))}function a(e,t){let[r,s]=e,o=r.length;return Array.from({length:o},((e,o)=>{let l=r[o],n=s[o];return l+t*(n-l)}))}function i(e,t){return n(e,t).map((([e,t])=>Math.abs(e-t))).reduce(((e,t)=>e+t))}s.regenColors(),window.addEventListener("resize",(e=>{s.cols=+getComputedStyle(t).getPropertyValue("--cols")}));
//# sourceMappingURL=index.3f88a4b6.js.map
