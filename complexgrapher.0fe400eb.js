function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},i=t.parcelRequire94c2;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){r[e]=t},t.parcelRequire94c2=i),i.register("hAv0Z",(function(t,n){var r,i;e(t.exports,"register",(function(){return r}),(function(e){return r=e})),e(t.exports,"resolve",(function(){return i}),(function(e){return i=e}));var o={};r=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)o[t[n]]=e[t[n]]},i=function(e){var t=o[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),i("hAv0Z").register(JSON.parse('{"fujT7":"complexgrapher.0fe400eb.js","dq1cl":"webkitTest.5c78f70c.js","egthy":"main.bd6a98bf.js","1GZwD":"main.66bf90c5.js","ainsM":"chunkloader.d3595d56.js","bumwR":"chunkloader.12de479c.js","2KAe5":"complexgrapher.c1802b56.js"}'));var o=i("jPsve");const a=(0,o.create)(o.all),l=document.querySelector("#wrapper"),c=document.querySelector("#funcForm"),u=c.querySelector("input"),s=document.querySelector("#graphButton"),d=document.querySelector("#zcoord"),f=document.querySelectorAll("button.zoom"),v=document.querySelector("#zoomForm"),m=v.querySelector("input"),p=document.querySelector("#scaleForm"),g=p.querySelector("input"),h=document.querySelector("#warning"),w=document.querySelectorAll(".domain"),y=document.createElement("canvas"),b=y.getContext("2d",{alpha:!1});l.appendChild(y);const E=[a.complex("-2-2i"),a.complex("2+2i")];let S=L();function L(){let e=parseInt(getComputedStyle(l).padding);return Math.min(250,(document.documentElement.clientWidth-1)/2-e)}g.value=""+S;let k,x,q,A=1,R=e=>e;var _,j;j=function(e,t,n){if(t===self.location.origin)return e;var r=n?"import "+JSON.stringify(e)+";":"importScripts("+JSON.stringify(e)+");";return URL.createObjectURL(new Blob([r],{type:"application/javascript"}))};let H=new URL(i("hAv0Z").resolve("dq1cl"),import.meta.url);_=j(H.toString(),H.origin,!0);let C=new Worker(_);C.postMessage(void 0);var F;let z=new URL(i("hAv0Z").resolve("egthy"),import.meta.url);F=j(z.toString(),z.origin,!0);var N;let D,O=new URL(i("hAv0Z").resolve("ainsM"),import.meta.url);function T(e){let t=e.pageX-y.offsetLeft,n=e.pageY-y.offsetTop;d.classList.remove("error"),d.textContent="z = ";const r=document.createElement("code");r.append(""+U(t,n)),d.append(r)}async function M(){return new Promise((e=>{requestAnimationFrame((()=>{requestAnimationFrame((()=>e()))}))}))}function U(e,t){let[n,r]=[(y.width-1)/2,(y.height-1)/2],i=(e-n)/(n/2)/A,o=-(t-r)/(r/2)/A;return a.complex(i,o)}function Z(e){let t=a.simplify(e),n=a.parse("f(z) = 0"),r=!1;return"OperatorNode"!=t.type||"divide"!=t.fn||isNaN(+t.args[0])||(t.args.reverse(),t=a.simplify(t),r=!0),n.expr=t,{fstr:n.toString(),inverse:r}}function I(e){d.textContent=`Done in ${e}ms.`,W()}function P(e){let t=e instanceof ErrorEvent?e.message:e;y.removeEventListener("mousemove",T),d.classList.add("error"),d.textContent=String(t),W()}function W(e=500){setTimeout((()=>{y.addEventListener("mousemove",T),x||(s.disabled=!1)}),e)}function $(e){let{chunk:t,buf:n}=e,r=new ImageData(new Uint8ClampedArray(n),t.width,t.height);b.putImageData(r,t.offx,t.offy)}N=j(O.toString(),O.origin,!0),C.onmessage=async function(e){d.textContent="Initializing workers...",await M(),x=e.data,k=x?new Worker(F):new Worker(N),await async function(e){let t={action:"init"};return e.postMessage(t),new Promise((t=>{e.onmessage=function(e){t()}}))}(k),k.onmessage=x?function(e){let t=e.data;if("chunkDone"===t.action)$(t);else if("done"===t.action)I(t.time);else{}}:function(e){$(e.data),I(Math.trunc(performance.now()-q))},k.onerror=P,s.disabled=!1,s.click(),C.terminate()},y.addEventListener("mousemove",T),y.addEventListener("click",(e=>{let t=U(e.pageX-y.offsetLeft,e.pageY-y.offsetTop);console.log(`z = ${t},\nf(z) = ${R(t)}`)})),u.addEventListener("input",(()=>{u.value=u.value.replace(/[^a-zA-Z0-9+\-*/^., ()]/g,"")})),c.addEventListener("submit",(e=>{e.preventDefault(),s.click()})),f[0].addEventListener("click",(()=>{A*=2,s.click()})),f[1].addEventListener("click",(()=>{1!==A&&(A=1,s.click())})),f[2].addEventListener("click",(()=>{A/=2,s.click()})),m.addEventListener("input",(()=>{if(m.value=m.value.replace(/[^0-9.]/g,""),isNaN(+g.value)&&(m.value="1"),[...m.value].filter((e=>"."===e)).length>1){var e=m.value.split(".");m.value=e[0]+"."+e.slice(1).join("")}})),v.addEventListener("submit",(e=>{e.preventDefault(),A!==+m.value&&(A=+m.value||0,s.click())})),g.addEventListener("input",(()=>{isNaN(+g.value)&&(g.value=""+S),h.style.display=+g.value>250?"inline":"none"})),p.addEventListener("submit",(e=>{e.preventDefault();let t=2*+g.value+1;y.width!==t&&(y.width=y.height=t,s.click())})),window.addEventListener("resize",(e=>{void 0!==D&&clearTimeout(D),S=L(),g.value=""+S,h.style.display=+g.value>250?"inline":"none",D=setTimeout((()=>s.click()),50)})),s.addEventListener("click",(async()=>{x||(s.disabled=!0),d.classList.remove("error"),m.value=A.toString();let e=2*+g.value+1;y.width!==e&&(y.width=y.height=e),[w[0].textContent,w[1].textContent]=E.map((e=>e.div(A).toString())),d.textContent="Graphing...",await M(),y.removeEventListener("mousemove",T);let t=u.value;try{R=a.evaluate(`f(z) = ${t}`),function(e,t){x||(q=performance.now());let n={action:"mainRequest",pev:Z(t),cd:{width:y.width,height:y.height,zoom:A}};e.postMessage(n)}(k,t)}catch(e){throw P(e),e}}));
//# sourceMappingURL=complexgrapher.0fe400eb.js.map
