var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},i=e.parcelRequire94c2;null==i&&((i=function(e){if(e in t)return t[e].exports;if(e in n){var i=n[e];delete n[e];var r={id:e,exports:{}};return t[e]=r,i.call(r.exports,r,r.exports),r.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){n[e]=t},e.parcelRequire94c2=i);var r=i("ghe96");const o=r.create(r.all);let a=document.querySelector("canvas"),l=document.querySelector("#funcForm"),u=l.querySelector("input"),c=document.querySelector("#graphButton"),d=document.querySelector("#zcoord"),s=document.querySelectorAll("button.zoom"),v=document.querySelector("#zoomForm"),f=v.querySelector("input"),m=document.querySelector("#scaleForm"),p=m.querySelector("input"),h=document.querySelector("#warning"),g=document.querySelectorAll(".domain"),L=a.getContext("2d",{alpha:!1}),w=1,y=e=>e,E=e=>e;var q=[o.complex("-2-2i"),o.complex("2+2i")];function x(e){d.classList.remove("error"),d.textContent=`z = ${b(e.pageX-a.offsetLeft,e.pageY-a.offsetTop)}`}function b(e,t){let n=(e-(a.width+1)/2)/((a.width-1)/4*w),i=-(t-(a.width+1)/2)/((a.height-1)/4*w);return o.complex(n,i)}function S(e){return o.complex(e)}function k(e,t,n=.5){let i=1/(e.abs()**n+1);return t?i:1-i}function z(e,t){return(e%t+t)%t}a.addEventListener("mousemove",x),a.addEventListener("click",(e=>{console.log(`z = ${b(e.pageX-a.offsetLeft,e.pageY-a.offsetTop)},\nf(z) = ${E(b(e.pageX-a.offsetLeft,e.pageY-a.offsetTop))}`)})),u.addEventListener("input",(()=>{u.value=u.value.replace(/[^a-zA-Z0-9+\-*/^., ()]/g,"")})),c.addEventListener("click",(()=>{d.classList.remove("error"),f.value=w.toString();let e=2*+p.value+1;a.width!==e&&(a.width=a.height=e),[g[0].textContent,g[1].textContent]=q.map((e=>e.div(w).toString())),d.textContent="Graphing...",a.removeEventListener("mousemove",x),new Promise(((e,t)=>{requestAnimationFrame((()=>{requestAnimationFrame(e)}))})).then((()=>function(e){let t=!1,n=o.simplify(e),i=1;r=n,"fn"in r&&"divide"==n.fn&&!isNaN(+n.args[0])?(E=o.compile("f(z)="+n).evaluate(),[i,n]=[+n.args[0],n.args[1]],y=o.compile(`f(z)=(${n})/${i}`).evaluate(),t=!0):E=y=o.compile("f(z)="+n).evaluate();var r;let l=L.createImageData(a.width,a.height),u=new Uint32Array(l.data.buffer);for(var c=0;c<a.width;c++)for(var d=0;d<a.height;d++){let e,n,i,r,o,l,s,v,f=S(y(b(c,d)));if(Number.isFinite(f.re)&&Number.isFinite(f.im))e=z((t?-1:1)*f.arg()*3/Math.PI,6),n=k(f,t),i=1-Math.abs(2*n-1),r=i*(1-Math.abs(z(e,2)-1)),o=n-i/2,[l,s,v]=0<=e&&e<1?[i,r,0]:1<=e&&e<2?[r,i,0]:2<=e&&e<3?[0,i,r]:3<=e&&e<4?[0,r,i]:4<=e&&e<5?[r,0,i]:[i,0,r],u[a.width*d+c]=-16777216|255*(v+o)<<16|255*(s+o)<<8|255*(l+o);else{let e=255*+!t;u[a.width*d+c]=-16777216|e<<16|e<<8|e}}L.putImageData(l,0,0)}(u.value))).then((()=>{d.textContent="Done.",setTimeout((()=>a.addEventListener("mousemove",x)),500)})).catch((e=>{throw d.classList.add("error"),d.textContent=e,setTimeout((()=>a.addEventListener("mousemove",x)),500),e}))})),s[0].addEventListener("click",(()=>{w*=2,c.click()})),s[1].addEventListener("click",(()=>{1!==w&&(w=1,c.click())})),s[2].addEventListener("click",(()=>{w/=2,c.click()})),f.addEventListener("input",(()=>{if(f.value=f.value.replace(/[^0-9.]/g,""),isNaN(+p.value)&&(f.value="1"),[...f.value].filter((e=>"."===e)).length>1){var e=f.value.split(".");f.value=e[0]+"."+e.slice(1).join("")}})),v.addEventListener("submit",(e=>{e.preventDefault(),w!==+f.value&&(w=+f.value||0,c.click())})),p.addEventListener("input",(()=>{isNaN(+p.value)&&(p.value="250"),h.style.display=+p.value>250?"inline":"none"})),m.addEventListener("submit",(e=>{e.preventDefault();let t=2*+p.value+1;a.width!==t&&(a.width=a.height=t,c.click())})),l.addEventListener("submit",(e=>{e.preventDefault(),c.click()})),c.click();
//# sourceMappingURL=complexgrapher.cc0105ff.js.map
