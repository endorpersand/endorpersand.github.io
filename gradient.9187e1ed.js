const e=document.querySelector("#lin-result canvas").getContext("2d",{alpha:!1}),t=document.querySelector("#rms-result canvas").getContext("2d",{alpha:!1}),n=document.querySelector("#css-result div#css-gradient"),r=document.querySelector("button#coloradd"),o=document.querySelector("div#colors"),l=document.querySelector("input#gamma-input");function c(e=!0){let t=function(e="#000000"){let t=document.createElement("div"),n=document.createElement("input");n.type="color",n.value=e,n.addEventListener("change",u);let r=document.createElement("button");return r.classList.add("colorrm"),r.textContent="x",r.addEventListener("click",(()=>{o.removeChild(t);let e=a();if(e.length<3)for(let t of e)t.disabled=!0;u()})),t.append(n,r),t}();o.insertBefore(t,r);let n=a();if(n.length>2)for(let e of n)e.disabled=!1;return e&&u(),t}function a(){return document.querySelectorAll("button.colorrm")}function i(e,t,n,r){return((1-r)*e**n+r*t**n)**(1/n)}function u(){const r=function(){let e=document.querySelectorAll("input[type=color]");return Array.from(e,(e=>e.value))}();n.style.background=`linear-gradient(0.25turn, ${r.join(", ")})`,d(e,"lin",r),d(t,"rms",r)}function d(e,t,n){const r=n.length-1,o=e.canvas;if("lin"===t){const t=e.createLinearGradient(0,0,o.width,0);for(var[c,a]of n.entries())t.addColorStop(c/r,a);e.fillStyle=t}else if("rms"===t){let t;"OffscreenCanvas"in globalThis?t=new OffscreenCanvas(o.width,1):(t=document.createElement("canvas"),[t.width,t.height]=[o.width,1]);const a=t.getContext("2d"),u=a.createImageData(t.width,1),d=new Uint32Array(u.data.buffer),s=d.length-1;for(var c=0;c<d.length;c++){const e=c/s*r,[t,o]=[Math.floor(e),e%1],[a,u]=[n[t],n[t+1]??"#000000"].map((e=>{return[(t=e).slice(1,3),t.slice(3,5),t.slice(5,7)].map((e=>parseInt(e,16)));var t})),f=Array.from({length:3},((e,t)=>i(a[t],u[t],(l.checkValidity()&&""!==l.value||(l.value="2.2"),+l.value),o)));d[c]=-16777216|f[2]<<16|f[1]<<8|f[0]<<0}a.putImageData(u,0,0);const f=e.createPattern(t,"repeat-y");e.fillStyle=f}else{}e.fillRect(0,0,o.width,o.height)}function s(...e){let t=[...o.querySelectorAll("div")];if(e.length<2)throw new Error("Two colors are required for a gradient");for(;e.length<t.length;)t.pop()?.remove();for(;t.length<e.length;)t.push(c(!1));t.forEach(((t,n)=>{const r=t.querySelector("input[type=color]"),o=e[n];r.value=o})),u()}u(),document.querySelectorAll("input[type=color]").forEach((e=>e.addEventListener("change",u))),l.addEventListener("input",u),r.addEventListener("click",(()=>{c(!0)})),document.querySelectorAll(".colorrm").forEach((e=>e.addEventListener("click",(()=>{o.removeChild(e.parentElement);let t=a();if(t.length<3)for(let e of t)e.disabled=!0;u()})))),window.setColors=s,window.gay=function(){s("#FF0000","#FFFF00","#00FF00","#00FFFF","#0000FF","#FF00FF","#FF0000")};
//# sourceMappingURL=gradient.9187e1ed.js.map
