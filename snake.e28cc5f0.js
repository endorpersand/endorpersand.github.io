const e=document.querySelector("#canvas"),t=e.getContext("2d");let[n,o]=([e.width,e.height]??[0,0]).map((e=>e/25));let a,c=[[Math.floor(n/4),Math.floor(o/2)]],r="e";const l="#222",s="#0b0",i="#d00",d="#fff";c.length=5;f([0,0],e.width,e.height,l,[0,0]),f(c[0],23,23,s),h();let u=setInterval(m,75);function f(e,n,o,a,c=[1,1]){let r=function(e){return(e??[0,0]).map((e=>25*e))}(e).map(((e,t)=>e+c[t]));t.fillStyle=a,t.fillRect(...r,n,o)}function h(){do{a=[Math.floor(Math.random()*n),Math.floor(Math.random()*o)]}while(c.some((e=>y(e,a))));f(a,23,23,i)}function m(){let e=[...c[0]];switch(r){case"n":e[1]--;break;case"e":e[0]++;break;case"s":e[1]++;break;case"w":e[0]--}if(!y(a,e)){f(c.pop(),27,27,l,[-1,-1])}var t,i;y(a,e)&&h(),t=e,c.some((e=>y(e,t)))&&w(),((i=e)[0]<0||i[0]>=n||i[1]<0||i[1]>=o)&&w(),c.unshift(e),function(e){switch(r){case"n":f(e,23,25,s);break;case"e":f(e,25,23,s,[-1,1]);break;case"s":f(e,23,25,s,[1,-1]);break;case"w":f(e,25,23,s)}}(e),document.querySelector("#score").textContent=`Score: ${c.length}`}function w(){clearInterval(u),t.fillStyle=d,t.font=250*e.width/700+"px 'Comic Sans MS', 'Papyrus', 'Impact', fantasy, cursive, sans-serif",t.textAlign="center",t.textBaseline="middle",t.fillText("F",e.width/2,e.height/2),document.onkeydown=e=>"r"==e.key?location.reload():void 0,document.onfocus=null;let n=document.createElement("button");n.textContent="Restart",n.onclick=()=>location.reload(),document.querySelector("#score")?.parentElement?.appendChild(n)}function y(e,t){return e.every(((e,n)=>e==t[n]))}document.onkeydown=e=>{switch(e.code){case"KeyW":case"ArrowUp":"s"!=r&&"n"!=r&&(r="n",m());break;case"KeyA":case"ArrowLeft":"e"!=r&&"w"!=r&&(r="w",m());break;case"KeyS":case"ArrowDown":"s"!=r&&"n"!=r&&(r="s",m());break;case"KeyD":case"ArrowRight":"e"!=r&&"w"!=r&&(r="e",m());break;case"KeyR":w()}},document.onblur=()=>{clearInterval(u),u=void 0},document.onfocus=()=>{u=u||setInterval(m,75)};
//# sourceMappingURL=snake.e28cc5f0.js.map
