{"mappings":"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","sources":["node_modules/.pnpm/@parcel+runtime-js@2.3.2_@parcel+core@2.3.2/node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/.pnpm/@parcel+runtime-js@2.3.2_@parcel+core@2.3.2/node_modules/@parcel/runtime-js/lib/runtime-86d547a30f542edc.js","node_modules/.pnpm/@parcel+runtime-js@2.3.2_@parcel+core@2.3.2/node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","src/taylor2/display.ts","node_modules/.pnpm/@parcel+runtime-js@2.3.2_@parcel+core@2.3.2/node_modules/@parcel/runtime-js/lib/helpers/get-worker-url.js","node_modules/.pnpm/@parcel+runtime-js@2.3.2_@parcel+core@2.3.2/node_modules/@parcel/runtime-js/lib/runtime-d71dfb7a0bfd6b6c.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"NcIOJ\\\":\\\"taylor2.69019ee3.js\\\",\\\"1Yv3L\\\":\\\"calc.4705fe09.js\\\",\\\"aUCA8\\\":\\\"complexgrapher.21927e55.js\\\"}\"));","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","import { create, all } from \"mathjs\";\nimport { TaylorMessage } from \"./calc\";\n\ndeclare var MathJax: any;\nconst math = create(all);\ntype MaybeTex = {\n    valid: false,\n    expr: string,\n} | {\n    valid: true,\n    expr: string,\n    tex: string\n};\n\nlet centerDiv = document.querySelector(\"#centerDiv\")!      as HTMLDivElement,\n    [centerX, centerY] = centerDiv.querySelectorAll(\"input\"),\n    funcInput = document.querySelector(\"#func input\")!     as HTMLInputElement,\n    funcTex = document.querySelector(\"#funcTex\")!          as HTMLDivElement,\n    resultTex = document.querySelector(\"#resultTex\")!      as HTMLDivElement,\n    approxNRadio = document.querySelector(\"#appn\")!        as HTMLInputElement,\n    approxNInput = document.querySelector(\"#appninput\")!   as HTMLInputElement,\n    computeButton = document.querySelector(\"#compute\")!    as HTMLButtonElement;\n\nlet tex: MaybeTex = {valid: false, expr: \"\"};\nlet swiftie = new Worker(new URL(\"./calc\", import.meta.url), {type: \"module\"});\n\ncenterX.addEventListener(\"input\", grayResult);\ncenterY.addEventListener(\"input\", grayResult);\nfuncInput.addEventListener(\"input\", updateFuncTex);\ndocument.querySelectorAll(\"input[name=approx]\").forEach(i => i.addEventListener(\"change\", radioUpdate));\ncomputeButton.addEventListener(\"click\", updateResultTex);\nupdateFuncTex();\nupdateResultTex();\n\nfunction texHandler(node: math.MathNode, options?: object) {\n    if (node.type === \"OperatorNode\" && node.op === \"*\") {\n        let [x, y] = node.args;\n        return `${x.toTex(options)}${y.toTex(options)}`;\n    }\n}\nfunction verifyExpression(expr: string, replEq = \"=\", explicitMul = true): MaybeTex {\n    let options = explicitMul ? {} : {handler: texHandler};\n\n    try {\n        let tex = \"f(x, y) = \" + math.parse(expr).toTex(options);\n        return {valid: true, expr, tex};\n    } catch {\n        return {valid: false, expr};\n    }\n}\n\nfunction findN() {\n    let rads = [...document.querySelectorAll(\"input[name=approx]\")];\n    let v = (rads as HTMLInputElement[])\n        .filter(e => e.checked)\n        .map(e => e.value)[0];\n    \n    if (+v != 0) return +v;\n    return +approxNInput.value;\n}\n\nfunction grayResult() {\n    resultTex.classList.add(\"notCurrentFunc\");\n}\n\nfunction updateTex() {\n    if (\"typeset\" in MathJax) {\n        MathJax.typeset();\n    }\n}\n\nfunction updateFuncTex() {\n    tex = verifyExpression(funcInput.value);\n\n    if (tex.valid) {\n        funcTex.innerHTML = `$$${tex.tex}$$`;\n    } else {\n        funcTex.innerHTML = `$$\\\\color{red}{?}$$`\n    }\n\n    grayResult();\n    updateTex();\n}\n\nfunction updateResultTex() {\n    if (tex.valid) {\n        let dat: TaylorMessage = [tex.expr, findN(), +centerX.value, +centerY.value];\n        swiftie.postMessage(dat);\n        resultTex.classList.remove(\"notCurrentFunc\");\n        resultTex.innerHTML = \"Working...\";\n    } else {\n        invalidResult();\n    }\n}\n\nfunction invalidResult() {\n    resultTex.innerHTML = `$$\\\\color{red}{?}$$`;\n    updateTex();\n}\n\nswiftie.onmessage = function(e) {\n    resultTex.classList.remove(\"err\");\n    let rtex = verifyExpression(e.data, \"\\\\approx\", false);\n    if (rtex.valid) {\n        resultTex.textContent = `$$${rtex.tex}$$`;\n        updateTex();\n    } else {\n        invalidResult();\n    }\n}\nswiftie.onerror = function(e) {\n    let msg = e.message;\n    let index = msg.indexOf(\"Undefined \");\n    let sym = msg.slice(index + \"Undefined symbol \".length); // can also be \"Undefined function\", but not that big of a deal\n    if (sym.includes(\"x\") || sym.includes(\"y\")) {\n        msg += \" (try adding * here?)\"\n    }\n    resultTex.textContent = msg;\n    resultTex.classList.add(\"err\");\n}\nfunction radioUpdate() {\n    approxNInput.disabled = !approxNRadio.checked;\n    grayResult();\n}","\"use strict\";\n\nmodule.exports = function (workerUrl, origin, isESM) {\n  if (origin === self.location.origin) {\n    // If the worker bundle's url is on the same origin as the document,\n    // use the worker bundle's own url.\n    return workerUrl;\n  } else {\n    // Otherwise, create a blob URL which loads the worker bundle with `importScripts`.\n    var source = isESM ? 'import ' + JSON.stringify(workerUrl) + ';' : 'importScripts(' + JSON.stringify(workerUrl) + ');';\n    return URL.createObjectURL(new Blob([source], {\n      type: 'application/javascript'\n    }));\n  }\n};","let workerURL = require('./helpers/get-worker-url');\nlet bundleURL = require('./helpers/bundle-url');\nlet url = bundleURL.getBundleURL('NcIOJ') + require('./helpers/bundle-manifest').resolve(\"1Yv3L\");module.exports = workerURL(url, bundleURL.getOrigin(url), false);"],"names":["$6ab4bf6df8d2e00b$export$6503ec6e8aabbaf","$6ab4bf6df8d2e00b$export$f7ad0328861e2f03","$6ab4bf6df8d2e00b$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$c4d42f307bc6e082$export$bdfd709ae4826697","$c4d42f307bc6e082$export$5a759dc7a1cfb72a","$59defca8dabda35a$var$math","$gm66E","create","all","$59defca8dabda35a$var$centerDiv","document","querySelector","ref","$iFC9j","slicedToArray","querySelectorAll","$59defca8dabda35a$var$centerX","$59defca8dabda35a$var$centerY","$59defca8dabda35a$var$funcInput","$59defca8dabda35a$var$funcTex","$59defca8dabda35a$var$resultTex","$59defca8dabda35a$var$approxNRadio","$59defca8dabda35a$var$approxNInput","$59defca8dabda35a$var$computeButton","$59defca8dabda35a$var$tex","valid","expr","$a8231ea99410477f$exports","workerUrl","origin","isESM","self","location","source","stringify","URL","createObjectURL","Blob","type","$c4d42f307bc6e082$var$bundleURL","$c4d42f307bc6e082$var$getBaseURL","url","replace","value","err","matches","stack","match","$c4d42f307bc6e082$var$getBundleURL","$580f82561f67a5b1$var$url","resolve","$580f82561f67a5b1$exports","$59defca8dabda35a$var$swiftie","Worker","$59defca8dabda35a$var$texHandler","node","options","op","_args","args","x","y","concat","toTex","$59defca8dabda35a$var$verifyExpression","explicitMul","arguments","handler","tex","e","$59defca8dabda35a$var$grayResult","classList","add","$59defca8dabda35a$var$updateTex","MathJax","typeset","$59defca8dabda35a$var$updateFuncTex","innerHTML","$59defca8dabda35a$var$updateResultTex","dat","v","toConsumableArray","filter","checked","map","postMessage","remove","$59defca8dabda35a$var$invalidResult","$59defca8dabda35a$var$radioUpdate","disabled","addEventListener","forEach","onmessage","rtex","data","textContent","onerror","msg","message","index","indexOf","sym","slice","includes"],"version":3,"file":"taylor2.69019ee3.js.map"}