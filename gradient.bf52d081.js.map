{"mappings":"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","sources":["node_modules/.pnpm/@swc+helpers@0.4.2/node_modules/@swc/helpers/src/_array_with_holes.mjs","node_modules/.pnpm/@swc+helpers@0.4.2/node_modules/@swc/helpers/src/_iterable_to_array.mjs","node_modules/.pnpm/@swc+helpers@0.4.2/node_modules/@swc/helpers/src/_non_iterable_rest.mjs","node_modules/.pnpm/@swc+helpers@0.4.2/node_modules/@swc/helpers/src/_array_like_to_array.mjs","node_modules/.pnpm/@swc+helpers@0.4.2/node_modules/@swc/helpers/src/_unsupported_iterable_to_array.mjs","node_modules/.pnpm/@swc+helpers@0.4.2/node_modules/@swc/helpers/src/_sliced_to_array.mjs","node_modules/.pnpm/@swc+helpers@0.4.2/node_modules/@swc/helpers/src/_array_without_holes.mjs","node_modules/.pnpm/@swc+helpers@0.4.2/node_modules/@swc/helpers/src/_non_iterable_spread.mjs","node_modules/.pnpm/@swc+helpers@0.4.2/node_modules/@swc/helpers/src/_to_consumable_array.mjs","src/gradient/gradient.ts"],"sourcesContent":["export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\n","import _arrayLikeToArray from './_array_like_to_array.mjs';\n\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))\n    return _arrayLikeToArray(o, minLen);\n}\n","import arrayWithHoles from './_array_with_holes.mjs';\nimport iterableToArrayLimit from './_iterable_to_array.mjs';\nimport nonIterableRest from './_non_iterable_rest.mjs';\nimport unsupportedIterableToArray from './_unsupported_iterable_to_array.mjs';\n\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n","import _arrayLikeToArray from './_array_like_to_array.mjs';\n\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n","import arrayWithoutHoles from './_array_without_holes.mjs';\nimport iterableToArray from './_iterable_to_array.mjs';\nimport nonIterableSpread from './_non_iterable_spread.mjs';\nimport unsupportedIterableToArray from './_unsupported_iterable_to_array.mjs';\n\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n","declare var OffscreenCanvas: any;\n\nconst canvas = document.querySelector('canvas')! as HTMLCanvasElement;\nconst ctx = canvas.getContext('2d')!;\nlet ipol = (document.querySelector(\"input[name='ipol'][checked]\")! as HTMLInputElement).value;\n\nlet ipolRadios = document.querySelectorAll('input[type=radio]'),\n    coloradd = document.querySelector('#coloradd')! as HTMLButtonElement,\n    colorsWrapper = document.querySelector('#colors')! as HTMLDivElement;\n\ntype RGB = [number, number, number];\n\ndocument.querySelectorAll('input[type=color]').forEach(x => x.addEventListener('change', update))\nipolRadios.forEach(x => x.addEventListener('change', e => {\n    ipol = (x as HTMLInputElement).value;\n    update();\n}));\n\ncoloradd.addEventListener('click', () => {\n    let div = colorDiv();\n    colorsWrapper.insertBefore(div, coloradd);\n\n    let buts = colorRMButtons();\n    if (buts.length > 2) {\n        for (let b of buts) {\n            b.disabled = false;\n        }\n    }\n    update();\n})\n\ndocument.querySelectorAll('.colorrm').forEach(e => e.addEventListener('click', () => {\n    colorsWrapper.removeChild(e.parentElement!);\n    let buts = colorRMButtons();\n    if (buts.length < 3) {\n        for (let b of buts) b.disabled = true;\n    }\n    update();\n}))\nupdate();\n\nfunction getColors() {\n    let cinputs =  document.querySelectorAll('input[type=color]');\n    return [...cinputs].map(x => (x as HTMLInputElement).value);\n}\n\nfunction rgb(hex: string): RGB {\n    return [hex.slice(1,3), hex.slice(3,5), hex.slice(5,7)].map(x => parseInt(x, 16)) as RGB;\n}\n\nfunction colorRMButtons() {\n    return document.querySelectorAll('.colorrm') as NodeListOf<HTMLButtonElement>;\n}\n\nfunction interpolate(a: number, b: number, prog: number) {\n    return Math.hypot(a * Math.sqrt(1 - prog), b * Math.sqrt(prog));\n}\nfunction colorDiv(hex = '#000000') {\n    let div = document.createElement('div');\n\n    let clr = document.createElement('input');\n    clr.type = 'color';\n    clr.value = hex;\n    clr.addEventListener('change', update);\n\n    let button = document.createElement('button');\n    button.classList.add('colorrm');\n    button.textContent = 'x';\n    button.addEventListener('click', () => {\n        colorsWrapper.removeChild(button.parentElement!);\n        let buts = colorRMButtons();\n        if (buts.length < 3) {\n            for (let b of buts) b.disabled = true;\n        }\n        update();\n    });\n        \n    div.appendChild(clr);\n    div.appendChild(button);\n    return div;\n}\n\nfunction update() {\n    let clrs = getColors();\n    let lind = clrs.length - 1;\n    switch (ipol) {\n        case 'lin':\n            let grad = ctx.createLinearGradient(0, 0, canvas.width, 0);\n            for (var [i, c] of clrs.entries()) grad.addColorStop(i / lind, c);\n            ctx.fillStyle = grad;\n            break;\n        case 'rms':\n            let ocanvas: HTMLCanvasElement;\n            if (\"OffscreenCanvas\" in globalThis) {\n                ocanvas = new OffscreenCanvas(canvas.width, 1);\n            } else {\n                ocanvas = document.createElement('canvas');\n                [ocanvas.width, ocanvas.height] = [canvas.width, 1];\n            }\n            let octx = ocanvas.getContext('2d')!;\n\n            let dat = octx.createImageData(ocanvas.width, 1);\n            let arr32 = new Uint32Array(dat.data.buffer);\n            let arrlind = arr32.length - 1;\n            for (var i = 0; i < arr32.length; i++) {\n                let pos = (i / arrlind) * lind;\n                let [j, prog] = [Math.floor(pos), pos % 1];\n                let [a, b] = [clrs[j], clrs[j + 1] ?? '#000000'].map(x => rgb(x));\n                let c = Array.from({length: 3}, (_, i) => interpolate(a[i], b[i], prog));\n                arr32[i] = 0xFF << 24\n                         | c[2] << 16\n                         | c[1] <<  8\n                         | c[0] <<  0;\n            }\n            octx.putImageData(dat, 0, 0);\n            let pat = ctx.createPattern(ocanvas, 'repeat-y')!;\n            ctx.fillStyle = pat;\n            break;\n\n    }\n\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n}"],"names":["$14fb98d44ad97c5c$export$2e2bcd8739ae039","arr","Array","isArray","$d480212494b9508b$export$2e2bcd8739ae039","iter","Symbol","iterator","from","$c19b5e87804eb1a1$export$2e2bcd8739ae039","TypeError","$e0b5485d7b4e10d0$export$2e2bcd8739ae039","len","length","i","arr2","$61a31d22c072bdf7$export$2e2bcd8739ae039","o","minLen","n","Object","prototype","toString","call","slice","constructor","name","test","$4a5c390b0864902b$export$2e2bcd8739ae039","$3ed4113311a7145f$export$2e2bcd8739ae039","$dd1d74fbf13e3392$export$2e2bcd8739ae039","$bff0ef45911c4072$export$2e2bcd8739ae039","$c92a08c2ed7b65ae$var$canvas","document","querySelector","$c92a08c2ed7b65ae$var$ctx","getContext","$c92a08c2ed7b65ae$var$ipol","value","$c92a08c2ed7b65ae$var$ipolRadios","querySelectorAll","$c92a08c2ed7b65ae$var$coloradd","$c92a08c2ed7b65ae$var$colorsWrapper","$c92a08c2ed7b65ae$var$colorRMButtons","$c92a08c2ed7b65ae$var$update","clrs","map","x","lind","grad","createLinearGradient","width","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","entries","next","done","_value","i11","c","addColorStop","err","return","fillStyle","ocanvas","ref1","pos","i1","arrlind","ref","Math","floor","j","prog","ref2","hex","parseInt","a","b","_","hypot","sqrt","$c92a08c2ed7b65ae$var$interpolate","arr32","globalThis","OffscreenCanvas","createElement","ref3","height","octx","dat","createImageData","Uint32Array","data","buffer","_loop","putImageData","pat","createPattern","fillRect","forEach","addEventListener","e","div","arguments","clr","type","button","classList","add","textContent","removeChild","parentElement","buts","disabled","appendChild","$c92a08c2ed7b65ae$var$colorDiv","insertBefore"],"version":3,"file":"gradient.bf52d081.js.map"}