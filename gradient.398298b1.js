function _arrayLikeToArray(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function _arrayWithHoles(r){if(Array.isArray(r))return r}function _arrayWithoutHoles(r){if(Array.isArray(r))return _arrayLikeToArray(r)}function _iterableToArray(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}function _iterableToArrayLimit(r,e){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var n,a,o=[],l=!0,i=!1;try{for(t=t.call(r);!(l=(n=t.next()).done)&&(o.push(n.value),!e||o.length!==e);l=!0);}catch(r){i=!0,a=r}finally{try{l||null==t.return||t.return()}finally{if(i)throw a}}return o}}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _slicedToArray(r,e){return _arrayWithHoles(r)||_iterableToArrayLimit(r,e)||_unsupportedIterableToArray(r,e)||_nonIterableRest()}function _toConsumableArray(r){return _arrayWithoutHoles(r)||_iterableToArray(r)||_unsupportedIterableToArray(r)||_nonIterableSpread()}function _unsupportedIterableToArray(r,e){if(r){if("string"==typeof r)return _arrayLikeToArray(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,e):void 0}}var canvas=document.querySelector("canvas"),ctx=canvas.getContext("2d"),ipol=document.querySelector("input[name='ipol'][checked]").value,ipolRadios=document.querySelectorAll("input[type=radio]"),coloradd=document.querySelector("#coloradd"),colorsWrapper=document.querySelector("#colors");function getColors(){return _toConsumableArray(document.querySelectorAll("input[type=color]")).map((function(r){return r.value}))}function rgb(r){return[r.slice(1,3),r.slice(3,5),r.slice(5,7)].map((function(r){return parseInt(r,16)}))}function colorRMButtons(){return document.querySelectorAll(".colorrm")}function interpolate(r,e,t){return Math.hypot(r*Math.sqrt(1-t),e*Math.sqrt(t))}function colorDiv(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#000000",e=document.createElement("div"),t=document.createElement("input");t.type="color",t.value=r,t.addEventListener("change",update);var n=document.createElement("button");return n.classList.add("colorrm"),n.textContent="x",n.addEventListener("click",(function(){colorsWrapper.removeChild(n.parentElement);var r=colorRMButtons(),e=!0,t=!1,a=void 0;if(r.length<3)try{for(var o,l=r[Symbol.iterator]();!(e=(o=l.next()).done);e=!0){o.value.disabled=!0}}catch(r){t=!0,a=r}finally{try{e||null==l.return||l.return()}finally{if(t)throw a}}update()})),e.appendChild(t),e.appendChild(n),e}function update(){var r=getColors(),e=r.length-1;switch(ipol){case"lin":var t=ctx.createLinearGradient(0,0,canvas.width,0),n=!0,a=!1,o=void 0;try{for(var l,i=r.entries()[Symbol.iterator]();!(n=(l=i.next()).done);n=!0){var c=_slicedToArray(l.value,2),u=c[0],d=c[1];t.addColorStop(u/e,d)}}catch(r){a=!0,o=r}finally{try{n||null==i.return||i.return()}finally{if(a)throw o}}ctx.fillStyle=t;break;case"rms":var y,s,f=function(t){var n,a=t/m*e,o=[Math.floor(a),a%1],l=o[0],i=o[1],c=_slicedToArray([r[l],null!==(n=r[l+1])&&void 0!==n?n:"#000000"].map((function(r){return rgb(r)})),2),u=c[0],d=c[1],y=Array.from({length:3},(function(r,e){return interpolate(u[e],d[e],i)}));h[t]=-16777216|y[2]<<16|y[1]<<8|y[0]<<0};if("OffscreenCanvas"in globalThis)y=new OffscreenCanvas(canvas.width,1);else y=document.createElement("canvas"),s=[canvas.width,1],y.width=s[0],y.height=s[1];var p=y.getContext("2d"),v=p.createImageData(y.width,1),h=new Uint32Array(v.data.buffer),m=h.length-1;for(u=0;u<h.length;u++)f(u);p.putImageData(v,0,0);var b=ctx.createPattern(y,"repeat-y");ctx.fillStyle=b}ctx.fillRect(0,0,canvas.width,canvas.height)}document.querySelectorAll("input[type=color]").forEach((function(r){return r.addEventListener("change",update)})),ipolRadios.forEach((function(r){return r.addEventListener("change",(function(e){ipol=r.value,update()}))})),coloradd.addEventListener("click",(function(){var r=colorDiv();colorsWrapper.insertBefore(r,coloradd);var e=colorRMButtons(),t=!0,n=!1,a=void 0;if(e.length>2)try{for(var o,l=e[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){o.value.disabled=!1}}catch(r){n=!0,a=r}finally{try{t||null==l.return||l.return()}finally{if(n)throw a}}update()})),document.querySelectorAll(".colorrm").forEach((function(r){return r.addEventListener("click",(function(){colorsWrapper.removeChild(r.parentElement);var e=colorRMButtons(),t=!0,n=!1,a=void 0;if(e.length<3)try{for(var o,l=e[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){o.value.disabled=!0}}catch(r){n=!0,a=r}finally{try{t||null==l.return||l.return()}finally{if(n)throw a}}update()}))})),update();
//# sourceMappingURL=gradient.398298b1.js.map
