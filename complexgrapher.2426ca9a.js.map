{"mappings":"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","sources":["node_modules/.pnpm/@swc+helpers@0.4.2/node_modules/@swc/helpers/src/_async_to_generator.mjs","node_modules/.pnpm/@parcel+runtime-js@2.6.2_@parcel+core@2.6.2/node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/.pnpm/@parcel+runtime-js@2.6.2_@parcel+core@2.6.2/node_modules/@parcel/runtime-js/lib/runtime-04f95f1dea13d367.js","src/complexgrapher/complexgrapher.ts","node_modules/.pnpm/@parcel+runtime-js@2.6.2_@parcel+core@2.6.2/node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/.pnpm/@parcel+runtime-js@2.6.2_@parcel+core@2.6.2/node_modules/@parcel/runtime-js/lib/helpers/get-worker-url.js","node_modules/.pnpm/@parcel+runtime-js@2.6.2_@parcel+core@2.6.2/node_modules/@parcel/runtime-js/lib/runtime-270ff6b1dfc95150.js","node_modules/.pnpm/@parcel+runtime-js@2.6.2_@parcel+core@2.6.2/node_modules/@parcel/runtime-js/lib/runtime-c450be412dcf1087.js","node_modules/.pnpm/@parcel+runtime-js@2.6.2_@parcel+core@2.6.2/node_modules/@parcel/runtime-js/lib/runtime-bc7740623c7c6548.js"],"sourcesContent":["function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n","\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"5Hjnn\\\":\\\"complexgrapher.2426ca9a.js\\\",\\\"dq1cl\\\":\\\"webkitTest.5c78f70c.js\\\",\\\"egthy\\\":\\\"main.6c1b5113.js\\\",\\\"8urlN\\\":\\\"main.9853c391.js\\\",\\\"9vJF7\\\":\\\"chunkLoader.bf0e0b55.js\\\",\\\"l8xXq\\\":\\\"chunkLoader.0046dfdb.js\\\",\\\"aUCA8\\\":\\\"complexgrapher.6b0c010b.js\\\"}\"));","import { create, all } from \"mathjs\";\nimport { ChunkData, Complex, ComplexFunction, InitIn, InitOut, LoaderOut, MainIn, MainOut, PartialEvaluator } from \"./types\";\nconst math = create(all);\n\nconst wrapper     = document.querySelector('#wrapper')!     as HTMLDivElement,\n      funcForm    = document.querySelector('#funcForm')!    as HTMLFormElement,\n      input       = funcForm.querySelector('input')!        as HTMLInputElement,\n      graphButton = document.querySelector('#graphButton')! as HTMLButtonElement,\n      zcoord      = document.querySelector('#zcoord')!      as HTMLDivElement,\n      zoomButtons = document.querySelectorAll('button.zoom'),\n      zoomForm    = document.querySelector('#zoomForm')!    as HTMLFormElement,\n      zoomInput   = zoomForm.querySelector('input')!        as HTMLInputElement,\n      scaleForm   = document.querySelector('#scaleForm')!   as HTMLFormElement,\n      scaleInput  = scaleForm.querySelector('input')!       as HTMLInputElement,\n      warning     = document.querySelector('#warning')!     as HTMLDivElement,\n      domain      = document.querySelectorAll('.domain');\n\nconst canvas = document.createElement(\"canvas\");\nconst ctx = canvas.getContext('2d', {alpha: false})!;\nwrapper.appendChild(canvas);\n\n/**\n * The default domain of the image at zoom 1\n */\nconst defaultDomain: [Complex, Complex] = [\n    math.complex('-2-2i'), \n    math.complex('2+2i'),\n] as any;\n\n/**\n * The default radius.\n */\nconst radiusThreshold = 250;\n/**\n * The radius the calculator will default to for the image. \n * \n * Typically 250 (so 501 x 501), but if window is small enough, this falls back to the window's width.\n */\nlet defaultRadius = computeDefRadius();\nfunction computeDefRadius() {\n    let padding = parseInt(getComputedStyle(wrapper).padding);\n    return Math.min(\n        radiusThreshold, \n        (document.documentElement.clientWidth - 1) / 2 - padding // size of the window / 2, minus padding\n    );\n}\n\nscaleInput.value = \"\" + defaultRadius;\n\n/**\n * The zoom of the image (which affects the domain, but not the dimensions of the image)\n * \n * Increase: zoom in\n * \n * Decrease: zoom out\n */\nlet zoom = 1;\n\n/**\n * Function that takes the input complex value to the output one\n * This is only used for console.log\n * @param z input\n * @returns output\n */\nlet d: ComplexFunction = (z => z);\n\nlet worker: Worker;\nlet canNest: boolean;\nlet time: number; // only used in fallback\n\n// On WebKit (iOS), nested Workers are not supported. So test if they are supported,\n// and if not, use the fallback that doesn't use nested Workers.\n\n/**\n * On WebKit (iOS), nested Workers are not supported. So this worker tests if they are supported.\n * The result is then used to determine whether or not to use the full main worker or a fallback.\n */\nlet webkitTest = new Worker(new URL(\"./worker/webkitTest\", import.meta.url), {type: \"module\"});\nwebkitTest.postMessage(undefined);\nwebkitTest.onmessage = async function (e: MessageEvent<boolean>) {\n    zcoord.textContent = \"Initializing workers...\";\n    await waitPageUpdate();\n    canNest = e.data;\n\n    worker = canNest \n        ? new Worker(new URL(\"./worker/main\", import.meta.url), {type: \"module\"}) \n        : new Worker(new URL(\"./worker/chunkLoader\", import.meta.url), {type: \"module\"});\n    \n    await initWorker(worker);\n\n    if (canNest) {\n        worker.onmessage = function (e: MessageEvent<MainOut>) {\n            let msg: MainOut = e.data;\n        \n            if (msg.action === \"chunkDone\") {\n                displayChunk(msg);\n            } else if (msg.action === \"done\") {\n                markDone(msg.time);\n            } else {\n                let _: never = msg;\n            }\n        }\n    } else {\n        worker.onmessage = function (e: MessageEvent<LoaderOut>) {\n            displayChunk(e.data);\n            markDone(Math.trunc(performance.now() - time));\n        }\n    }\n    \n    worker.onerror = onComputeError;\n    graphButton.disabled = false;\n    graphButton.click();\n    webkitTest.terminate();\n}\n\n/**\n * Event listener that displays the complex coordinate of the mouse's current position.\n */\n function coordinateDisplay(e: MouseEvent) {\n    let cx = e.pageX - canvas.offsetLeft;\n    let cy = e.pageY - canvas.offsetTop;\n\n    zcoord.classList.remove('error');\n    zcoord.textContent = 'z = ';\n    \n    const code = document.createElement(\"code\");\n    code.append(\"\" + convPlanes(cx, cy));\n    zcoord.append(code);\n};\ncanvas.addEventListener('mousemove', coordinateDisplay);\ncanvas.addEventListener('click', e => {\n    let cx = e.pageX - canvas.offsetLeft;\n    let cy = e.pageY - canvas.offsetTop;\n\n    let z = convPlanes(cx, cy);\n    console.log(`z = ${z},\\nf(z) = ${d(z)}`);\n});\n\n\n// Function input handlers:\ninput.addEventListener('input', () => {\n    input.value = input.value.replace(/[^a-zA-Z0-9+\\-*/^., ()]/g, '');\n});\nfuncForm.addEventListener('submit', e => {\n    e.preventDefault();\n    graphButton.click();\n});\n\n// zoom in\nzoomButtons[0].addEventListener('click', () => {\n    zoom *= 2;\n    graphButton.click();\n});\n// reset zoom\nzoomButtons[1].addEventListener('click', () => {\n    if (zoom !== 1) {\n        zoom = 1;\n        graphButton.click();\n    }\n});\n// zoom out\nzoomButtons[2].addEventListener('click', () => {\n    zoom /= 2;\n    graphButton.click();\n});\n\n// arbitrary zoom\nzoomInput.addEventListener('input', () => {\n    zoomInput.value = zoomInput.value.replace(/[^0-9.]/g, '');\n    if (isNaN(+scaleInput.value)) zoomInput.value = \"1\";\n\n    if ([...zoomInput.value].filter(x => x === '.').length > 1) {\n        var ziArray = zoomInput.value.split('.');\n        zoomInput.value = ziArray[0] + '.' + ziArray.slice(1).join('');\n    }\n});\nzoomForm.addEventListener('submit', e => {\n    e.preventDefault();\n    if (zoom !== +zoomInput.value) {\n    zoom = +zoomInput.value || 0;\n    graphButton.click();\n    }\n});\n\n// scale handler:\nscaleInput.addEventListener('input', () => {\n    if (isNaN(+scaleInput.value)) scaleInput.value = \"\" + defaultRadius;\n    warning.style.display = +scaleInput.value > radiusThreshold ? 'inline' : 'none';\n});\nscaleForm.addEventListener('submit', e => {\n    e.preventDefault();\n    let size = +scaleInput.value * 2 + 1;\n    if (canvas.width !== size) {\n    canvas.width = canvas.height = size;\n    graphButton.click();\n    }\n});\n\nlet resizeCheck: number | undefined;\nwindow.addEventListener(\"resize\", e => {\n    if (typeof resizeCheck !== \"undefined\") clearTimeout(resizeCheck);\n\n    defaultRadius = computeDefRadius();\n    scaleInput.value = \"\" + defaultRadius;\n    warning.style.display = +scaleInput.value > radiusThreshold ? 'inline' : 'none';\n\n    // if resize is done then perform recompute\n    resizeCheck = setTimeout(() => graphButton.click(), 50);\n});\n\ngraphButton.addEventListener('click', async () => {\n    if (!canNest) graphButton.disabled = true;\n\n    zcoord.classList.remove('error');\n    zoomInput.value = zoom.toString();\n\n    let size = +scaleInput.value * 2 + 1;\n    if (canvas.width !== size) canvas.width = canvas.height = size;\n    [domain[0].textContent, domain[1].textContent] = defaultDomain.map(x => x.div(zoom).toString());\n    zcoord.textContent = 'Graphing...'\n    await waitPageUpdate();\n    canvas.removeEventListener('mousemove', coordinateDisplay);\n\n    let fstr = input.value;\n    try {\n        d = math.evaluate(`f(z) = ${fstr}`);\n        startWorker(worker, fstr);\n    } catch (e) {\n        onComputeError(e as any);\n        throw e;\n    }\n});\n\n/**\n * @returns a promise that resolves when the DOM updates displaying\n */\nasync function waitPageUpdate() {\n    return new Promise<void>(resolve => {\n        requestAnimationFrame(() => { // this is called before update\n            requestAnimationFrame(() => resolve()); // this is called after update\n        });\n    })\n}\n\n/**\n * Converts xy canvas pixels to values in the complex plane\n * @param x x coord\n * @param y y coord\n * @returns Complex value\n */\nfunction convPlanes(x: number, y: number) {\n    //converts xy pixel plane to complex plane\n\n    // let cmx =  (row - rx) / (rx / 2) / scale,\n    //     cmy = -(col - ry) / (ry / 2) / scale;\n\n    // row - rx: distance from center, in canvas pixels\n    // / (rx / 2): normalizes that so the edge is 2\n    // / scale: scale mult.\n\n    let [rx, ry] = [(canvas.width - 1) / 2, (canvas.height - 1) / 2];\n    let cmx =  (x - rx) / (rx / 2) / zoom,\n        cmy = -(y - ry) / (ry / 2) / zoom;\n    return math.complex(cmx, cmy) as unknown as Complex;\n}\n\n/**\n * Call an \"init\" action on a worker to prepare it for work.\n * @param w Worker to initialize.\n * @returns promise that resolves once it finishes initialization.\n */\nasync function initWorker(w: Worker) {\n    let init: InitIn = { action: \"init\" };\n    w.postMessage(init);\n\n    return new Promise<void>(resolve => {\n        w.onmessage = function(e: MessageEvent<InitOut>) {\n            resolve();\n        }\n    });\n}\n\n/**\n * Instruct the worker to begin processing a function.\n * @param w the worker to instruct.\n * @param fstr the function input\n */\nfunction startWorker(w: Worker, fstr: string) {\n    if (!canNest) time = performance.now();\n\n    let msg: MainIn = {\n        action: \"mainRequest\",\n        pev: partialEvaluate(fstr), \n        cd: {\n        width: canvas.width,\n        height: canvas.height,\n        zoom\n    }};\n    w.postMessage(msg);\n}\n\n/**\n * Take a string and evaluate it for speed. Simplify the string and also apply the reciprocal optimization.\n * This partial evaluation can then be fully evaluated in the workers.\n * @param fstr string to partially evaluate\n * @returns partially evaluated string\n */\nfunction partialEvaluate(fstr: string): PartialEvaluator {\n    let node = math.simplify(fstr);\n    let fnode = math.parse(\"f(z) = 0\") as math.FunctionAssignmentNode;\n\n    let inverse = false;\n    if (node.type == \"OperatorNode\" && node.fn == 'divide' && !isNaN(+node.args[0])) { // reciprocal func\n        node.args.reverse();\n        node = math.simplify(node);\n        inverse = true;\n    }\n\n    fnode.expr = node;\n    return { fstr: fnode.toString(), inverse };\n}\n\n/**\n * Display a done message with how long it took to complete\n * @param t time (in ms) it took for the operation to complete\n */\nfunction markDone(t: number) {\n    zcoord.textContent = `Done in ${t}ms.`;\n    reenableHover();\n}\n\n/**\n * Handle errors in computation\n * @param e the error\n */\nfunction onComputeError(e: Error | ErrorEvent) {\n    let err = e instanceof ErrorEvent ? e.message : e;\n\n    canvas.removeEventListener('mousemove', coordinateDisplay);\n    zcoord.classList.add('error');\n    zcoord.textContent = String(err);\n    reenableHover();\n}\n\n/**\n * Reenable interactability after an error\n * @param after how many ms before hover and interactibility should reenable\n */\nfunction reenableHover(after = 500) {\n    setTimeout(() => {\n        canvas.addEventListener('mousemove', coordinateDisplay);\n        if (!canNest) graphButton.disabled = false;\n    }, after);\n}\n\n/**\n * Update the canvas with the loaded chunk\n * @param data the data from the worker\n */\nfunction displayChunk(data: LoaderOut) {\n    let {chunk, buf} = data;\n\n    let dat = new ImageData(new Uint8ClampedArray(buf), chunk.width, chunk.height);\n    ctx.putImageData(dat, chunk.offx, chunk.offy);\n}","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","\"use strict\";\n\nmodule.exports = function (workerUrl, origin, isESM) {\n  if (origin === self.location.origin) {\n    // If the worker bundle's url is on the same origin as the document,\n    // use the worker bundle's own url.\n    return workerUrl;\n  } else {\n    // Otherwise, create a blob URL which loads the worker bundle with `importScripts`.\n    var source = isESM ? 'import ' + JSON.stringify(workerUrl) + ';' : 'importScripts(' + JSON.stringify(workerUrl) + ');';\n    return URL.createObjectURL(new Blob([source], {\n      type: 'application/javascript'\n    }));\n  }\n};","let workerURL = require('./helpers/get-worker-url');\nlet bundleURL = require('./helpers/bundle-url');\nlet url = bundleURL.getBundleURL('5Hjnn') + require('./helpers/bundle-manifest').resolve(\"dq1cl\");module.exports = workerURL(url, bundleURL.getOrigin(url), false);","let workerURL = require('./helpers/get-worker-url');\nlet bundleURL = require('./helpers/bundle-url');\nlet url = bundleURL.getBundleURL('5Hjnn') + require('./helpers/bundle-manifest').resolve(\"egthy\");module.exports = workerURL(url, bundleURL.getOrigin(url), false);","let workerURL = require('./helpers/get-worker-url');\nlet bundleURL = require('./helpers/bundle-url');\nlet url = bundleURL.getBundleURL('5Hjnn') + require('./helpers/bundle-manifest').resolve(\"9vJF7\");module.exports = workerURL(url, bundleURL.getOrigin(url), false);"],"names":["$9855af1f873829f4$var$asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","$9855af1f873829f4$export$2e2bcd8739ae039","fn","self","this","args","arguments","apply","err","undefined","$692ff81777bc7261$export$6503ec6e8aabbaf","$692ff81777bc7261$export$f7ad0328861e2f03","$692ff81777bc7261$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$a1c2e7b6e24fd632$var$math","$b3Rbn","create","all","$a1c2e7b6e24fd632$var$wrapper","document","querySelector","$a1c2e7b6e24fd632$var$funcForm","$a1c2e7b6e24fd632$var$input","$a1c2e7b6e24fd632$var$graphButton","$a1c2e7b6e24fd632$var$zcoord","$a1c2e7b6e24fd632$var$zoomButtons","querySelectorAll","$a1c2e7b6e24fd632$var$zoomForm","$a1c2e7b6e24fd632$var$zoomInput","$a1c2e7b6e24fd632$var$scaleForm","$a1c2e7b6e24fd632$var$scaleInput","$a1c2e7b6e24fd632$var$warning","$a1c2e7b6e24fd632$var$domain","$a1c2e7b6e24fd632$var$canvas","createElement","$a1c2e7b6e24fd632$var$ctx","getContext","alpha","appendChild","$a1c2e7b6e24fd632$var$defaultDomain","complex","$a1c2e7b6e24fd632$var$defaultRadius","$a1c2e7b6e24fd632$var$computeDefRadius","padding","parseInt","getComputedStyle","Math","min","documentElement","clientWidth","$a1c2e7b6e24fd632$var$worker","$a1c2e7b6e24fd632$var$canNest","$a1c2e7b6e24fd632$var$time","$b896bd97a2fc8cb8$export$bdfd709ae4826697","$b896bd97a2fc8cb8$export$5a759dc7a1cfb72a","$a1c2e7b6e24fd632$var$zoom","$a1c2e7b6e24fd632$var$d","z","$5afb424d5d25c1fb$exports","workerUrl","origin","isESM","location","source","stringify","URL","createObjectURL","Blob","type","$b896bd97a2fc8cb8$var$bundleURL","$b896bd97a2fc8cb8$var$getBaseURL","url","replace","matches","stack","match","$b896bd97a2fc8cb8$var$getBundleURL","$0c04cab1b8fef68e$var$url","$0c04cab1b8fef68e$exports","$a1c2e7b6e24fd632$var$webkitTest","Worker","postMessage","$6a16b0a078527ef0$var$url","$6a16b0a078527ef0$exports","$a1c2e7b6e24fd632$var$resizeCheck","$9aa38fc899803b17$var$url","$a1c2e7b6e24fd632$var$coordinateDisplay","e","cx","pageX","offsetLeft","cy","pageY","offsetTop","classList","remove","textContent","code","append","$a1c2e7b6e24fd632$var$convPlanes","$a1c2e7b6e24fd632$var$waitPageUpdate","$a1c2e7b6e24fd632$var$_waitPageUpdate","$parcel$interopDefault","$isjeC","mark","_callee","requestAnimationFrame","x","y","ref","width","height","rx","ry","cmx","cmy","$a1c2e7b6e24fd632$var$initWorker","w","$a1c2e7b6e24fd632$var$_initWorker","init","action","onmessage","$a1c2e7b6e24fd632$var$startWorker","fstr","performance","now","msg","pev","$a1c2e7b6e24fd632$var$partialEvaluate","cd","zoom","node","simplify","fnode","inverse","isNaN","reverse","expr","toString","$a1c2e7b6e24fd632$var$markDone","t","concat","$a1c2e7b6e24fd632$var$reenableHover","$a1c2e7b6e24fd632$var$onComputeError","ErrorEvent","message","removeEventListener","add","String","after","setTimeout","addEventListener","disabled","$a1c2e7b6e24fd632$var$displayChunk","data","chunk","buf","dat","ImageData","Uint8ClampedArray","putImageData","offx","offy","$9aa38fc899803b17$exports","e1","time","trunc","onerror","click","terminate","console","log","preventDefault","$9uQq0","default","filter","ziArray","split","slice","join","style","display","size","window","clearTimeout","map","div","evaluate","_ctx","t0"],"version":3,"file":"complexgrapher.2426ca9a.js.map"}