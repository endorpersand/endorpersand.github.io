function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},i=t.parcelRequire94c2;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){r[e]=t},t.parcelRequire94c2=i),i.register("hAv0Z",(function(t,n){var r,i;e(t.exports,"register",(function(){return r}),(function(e){return r=e})),e(t.exports,"resolve",(function(){return i}),(function(e){return i=e}));var o={};r=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)o[t[n]]=e[t[n]]},i=function(e){var t=o[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),i("hAv0Z").register(JSON.parse('{"fujT7":"complexgrapher.19c18449.js","dq1cl":"webkitTest.5c78f70c.js","egthy":"main.7aae500f.js","8urlN":"main.9853c391.js","9vJF7":"chunkLoader.86fc93f6.js","l8xXq":"chunkLoader.37bf9cc5.js","2KAe5":"complexgrapher.57caffbe.js"}'));var o=i("jPsve");const a=(0,o.create)(o.all),l=document.querySelector("#wrapper"),c=document.querySelector("#funcForm"),u=c.querySelector("input"),s=document.querySelector("#graphButton"),d=document.querySelector("#zcoord"),f=document.querySelectorAll("button.zoom"),v=document.querySelector("#zoomForm"),m=v.querySelector("input"),p=document.querySelector("#scaleForm"),g=p.querySelector("input"),h=document.querySelector("#warning"),w=document.querySelectorAll(".domain"),y=document.createElement("canvas"),E=y.getContext("2d",{alpha:!1});l.appendChild(y);const S=[a.complex("-2-2i"),a.complex("2+2i")];let L=b();function b(){let e=parseInt(getComputedStyle(l).padding);return Math.min(250,(document.documentElement.clientWidth-1)/2-e)}g.value=""+L;let k,x,q,A=1,_=e=>e;var F,R;R=function(e,t,n){if(t===self.location.origin)return e;var r=n?"import "+JSON.stringify(e)+";":"importScripts("+JSON.stringify(e)+");";return URL.createObjectURL(new Blob([r],{type:"application/javascript"}))};let j=new URL(i("hAv0Z").resolve("dq1cl"),import.meta.url);F=R(j.toString(),j.origin,!0);let H=new Worker(F);H.postMessage(void 0);var C;let N=new URL(i("hAv0Z").resolve("egthy"),import.meta.url);C=R(N.toString(),N.origin,!0);var z;let O,T=new URL(i("hAv0Z").resolve("9vJF7"),import.meta.url);function D(e){let t=e.pageX-y.offsetLeft,n=e.pageY-y.offsetTop;d.classList.remove("error"),d.textContent="z = ";const r=document.createElement("code");r.append(""+M(t,n)),d.append(r)}async function U(){return new Promise((e=>{requestAnimationFrame((()=>{requestAnimationFrame((()=>e()))}))}))}function M(e,t){let[n,r]=[(y.width-1)/2,(y.height-1)/2],i=(e-n)/(n/2)/A,o=-(t-r)/(r/2)/A;return a.complex(i,o)}function Z(e){let t=a.simplify(e),n=a.parse("f(z) = 0"),r=!1;return"OperatorNode"!=t.type||"divide"!=t.fn||isNaN(+t.args[0])||(t.args.reverse(),t=a.simplify(t),r=!0),n.expr=t,{fstr:n.toString(),inverse:r}}function J(e){d.textContent=`Done in ${e}ms.`,P()}function I(e){let t=e instanceof ErrorEvent?e.message:e;y.removeEventListener("mousemove",D),d.classList.add("error"),d.textContent=String(t),P()}function P(e=500){setTimeout((()=>{y.addEventListener("mousemove",D),x||(s.disabled=!1)}),e)}function W(e){let{chunk:t,buf:n}=e,r=new ImageData(new Uint8ClampedArray(n),t.width,t.height);E.putImageData(r,t.offx,t.offy)}z=R(T.toString(),T.origin,!0),H.onmessage=async function(e){d.textContent="Initializing workers...",await U(),x=e.data,k=x?new Worker(C):new Worker(z),await async function(e){let t={action:"init"};return e.postMessage(t),new Promise((t=>{e.onmessage=function(e){t()}}))}(k),k.onmessage=x?function(e){let t=e.data;if("chunkDone"===t.action)W(t);else if("done"===t.action)J(t.time);else{}}:function(e){W(e.data),J(Math.trunc(performance.now()-q))},k.onerror=I,s.disabled=!1,s.click(),H.terminate()},y.addEventListener("mousemove",D),y.addEventListener("click",(e=>{let t=M(e.pageX-y.offsetLeft,e.pageY-y.offsetTop);console.log(`z = ${t},\nf(z) = ${_(t)}`)})),u.addEventListener("input",(()=>{u.value=u.value.replace(/[^a-zA-Z0-9+\-*/^., ()]/g,"")})),c.addEventListener("submit",(e=>{e.preventDefault(),s.click()})),f[0].addEventListener("click",(()=>{A*=2,s.click()})),f[1].addEventListener("click",(()=>{1!==A&&(A=1,s.click())})),f[2].addEventListener("click",(()=>{A/=2,s.click()})),m.addEventListener("input",(()=>{if(m.value=m.value.replace(/[^0-9.]/g,""),isNaN(+g.value)&&(m.value="1"),[...m.value].filter((e=>"."===e)).length>1){var e=m.value.split(".");m.value=e[0]+"."+e.slice(1).join("")}})),v.addEventListener("submit",(e=>{e.preventDefault(),A!==+m.value&&(A=+m.value||0,s.click())})),g.addEventListener("input",(()=>{isNaN(+g.value)&&(g.value=""+L),h.style.display=+g.value>250?"inline":"none"})),p.addEventListener("submit",(e=>{e.preventDefault();let t=2*+g.value+1;y.width!==t&&(y.width=y.height=t,s.click())})),window.addEventListener("resize",(e=>{void 0!==O&&clearTimeout(O),L=b(),g.value=""+L,h.style.display=+g.value>250?"inline":"none",O=setTimeout((()=>s.click()),50)})),s.addEventListener("click",(async()=>{x||(s.disabled=!0),d.classList.remove("error"),m.value=A.toString();let e=2*+g.value+1;y.width!==e&&(y.width=y.height=e),[w[0].textContent,w[1].textContent]=S.map((e=>e.div(A).toString())),d.textContent="Graphing...",await U(),y.removeEventListener("mousemove",D);let t=u.value;try{_=a.evaluate(`f(z) = ${t}`),function(e,t){x||(q=performance.now());let n={action:"mainRequest",pev:Z(t),cd:{width:y.width,height:y.height,zoom:A}};e.postMessage(n)}(k,t)}catch(e){throw I(e),e}}));
//# sourceMappingURL=complexgrapher.19c18449.js.map
