!function(){function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},o={},a=n.parcelRequire94c2;function u(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){u(i,r,o,a,c,"next",e)}function c(e){u(i,r,o,a,c,"throw",e)}a(void 0)}))}}null==a&&((a=function(e){if(e in r)return r[e].exports;if(e in o){var t=o[e];delete o[e];var n={id:e,exports:{}};return r[e]=n,t.call(n.exports,n,n.exports),n.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){o[e]=t},n.parcelRequire94c2=a),a.register("91UpR",(function(t,n){var r,o;e(t.exports,"register",(function(){return r}),(function(e){return r=e})),e(t.exports,"resolve",(function(){return o}),(function(e){return o=e}));var i={};r=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)i[t[n]]=e[t[n]]},o=function(e){var t=i[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),a.register("fQyQn",(function(t,n){var r,o;e(t.exports,"getBundleURL",(function(){return r}),(function(e){return r=e})),e(t.exports,"getOrigin",(function(){return o}),(function(e){return o=e}));var i={};function a(e){return(""+e).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}r=function(e){var t=i[e];return t||(t=function(){try{throw new Error}catch(t){var e=(""+t.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/[^)\n]+/g);if(e)return a(e[2])}return"/"}(),i[e]=t),t},o=function(e){var t=(""+e).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/[^/]+/);if(!t)throw new Error("Origin not found");return t[0]}})),a("91UpR").register(JSON.parse('{"5Hjnn":"complexgrapher.d7fda7fc.js","dq1cl":"webkitTest.5c78f70c.js","egthy":"main.512522d2.js","1GZwD":"main.66bf90c5.js","ainsM":"chunkloader.bc8a9feb.js","bumwR":"chunkloader.c3aaeffc.js","aUCA8":"complexgrapher.daa91fa8.js","33yRb":"complexgrapher.803d8665.js"}'));var s=a("i4pIp"),f=a("e9mLB"),l=a("isjeC"),d=a("b3Rbn"),p=a("fADtK"),m=(a("fADtK"),a("7r89I")),v=a("aJpC9"),h=a("d2MH1"),g=a("c7aA8");function y(e){return(0,m.default)(e)||(0,v.default)(e)||(0,g.default)(e,i)||(0,h.default)()}f=a("e9mLB"),d=a("b3Rbn"),p=a("fADtK");var w=(0,d.create)(d.all),b={pi:p.Complex.PI,e:p.Complex.E,i:p.Complex.I,inf:p.Complex.INFINITY,infinity:p.Complex.INFINITY,epsilon:p.Complex.EPSILON,nan:p.Complex.NAN};function x(e,t){if(t in e)return e[t]}function E(e){var t=e.name;if("z"===(t=t.toLowerCase()))return{type:"z"};if(function(e){return e in p.Complex.I}(t))return{type:"method",name:t};if(t in b)return{type:"constant",value:b[t]};throw new Error("Unrecognized symbol [".concat(t,"]"))}var C={add:function(e){return e.add.bind(e)},unaryPlus:function(e){return function(){return e}},subtract:function(e){return e.sub.bind(e)},unaryMinus:function(e){return e.neg.bind(e)},multiply:function(e){return e.mul.bind(e)},divide:function(e){return e.div.bind(e)},pow:function(e){return e.pow.bind(e)},factorial:function(e){return function(){return w.gamma(e.add(1))}}};function L(e,t){if("constant"===e.type)return e.value;if("function"===e.type)return e.f(t);if("z"===e.type)return t;throw new Error("Unrecognized fold result ".concat(e.type))}function S(e,t,n){var r=this,o=t.map((function(e){return R(e)}));if(o.every((function(e){return"constant"===e.type}))){var i=y(o.map((function(e){return e.value}))),a=i[0],u=i.slice(1),c=(0,p.Complex)(a),s=e(c);return"number"==typeof s?{type:"constant",value:s}:{type:"constant",value:s.bind(c).apply(this,(0,f.default)(u))}}var l=y(o),d=l[0],m=l.slice(1);if(n)return{type:"function",f:function(t){var n=(0,p.Complex)(L(d,t)),o=m.map((function(e){return L(e,t)})),i=e(n);return"number"==typeof i?i:i.bind(n).apply(r,(0,f.default)(o))}}}function R(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];switch(e.type){case"ConstantNode":return{type:"constant",value:e.value};case"FunctionNode":var n=E(e.fn);if("method"===n.type){var r=S((function(e){return e[n.name]}),e.args,t);if(void 0===r)throw new Error("Unexpected function [".concat(n.name,"]"));return r}if("constant"===n.type)throw new Error("Expected function, got constant [".concat(e.fn.name," = ").concat(n.value,"]"));if("z"===n.type)throw new Error("Expected function, got [z]");throw new Error("Expected function, got [".concat(n.type,"]"));case"OperatorNode":var o=x(C,e.fn),i=o?S(o,e.args,t):void 0;if(void 0===i)throw new Error("Unexpected operator [".concat(e.op,"]"));return i;case"ParenthesisNode":return R(e.content);case"SymbolNode":var a=E(e);if("method"===a.type)throw new Error("Unexpected function [".concat(e.name,"]"));return a;default:throw new Error("Cannot parse [".concat(e.type,"] into complex function"))}}function k(e){var t=R(w.parse(e));switch(t.type){case"constant":return{type:"constant",f:t.value};case"function":return t;case"z":return{type:"function",f:function(e){return e}};default:throw new Error("Invalid fold result type ".concat(t.type))}}var q=(0,d.create)(d.all),A=document.querySelector("div#wrapper"),O=document.querySelector("div#controls"),H=document.querySelector("input#func-input"),I=document.querySelector("#graph-button"),N=document.querySelector("div#graph-status"),U=document.querySelectorAll("div#z-wrapper code"),_=document.querySelectorAll("button.zoom"),z=document.querySelector("input#zoom-input"),j=document.querySelectorAll("input.center-input"),D=document.querySelector("button#recenter-button"),F=document.querySelector("button#home-button"),M=document.querySelectorAll(".domain"),T=document.createElement("canvas"),Y=T.getContext("2d",{alpha:!1});function B(){return P.apply(this,arguments)}function P(){return(P=c(t(l).mark((function e(){var n,r,o;return t(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je();case 2:n=T.getBoundingClientRect(),r=n.width,o=n.height,We(T,"width",Math.trunc(r)),We(T,"height",Math.trunc(o)),Y.globalCompositeOperation="copy",fe();case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}A.appendChild(T),B();var Q=document.createElement("canvas"),X=Q.getContext("2d",{alpha:!1}),J={refs:0,mat:q.identity(3)};function K(){J.refs||(Q.width=T.width,Q.height=T.height,X.globalCompositeOperation="copy",X.imageSmoothingEnabled=!1,X.drawImage(T,0,0),J.refs++,J.mat=q.identity(3))}function Z(){if(J.refs){var e=J.mat;Y.setTransform(e.get([0,0]),e.get([1,0]),e.get([0,1]),e.get([1,1]),e.get([0,2]),e.get([1,2])),Y.drawImage(Q,0,0),Y.resetTransform()}}function W(e,t){J.mat=q.multiply(q.matrix([[1,0,e],[0,1,t],[0,0,1]]),J.mat)}function G(e,t){var n=(0,s.default)(null!=t?t:[(T.width-1)/2,(T.height-1)/2],2),r=n[0],o=n[1];J.mat=q.chain(q.matrix([[1,0,r],[0,1,o],[0,0,1]])).multiply(q.matrix([[1/e,0,0],[0,1/e,0],[0,0,1]])).multiply(q.matrix([[1,0,-r],[0,1,-o],[0,0,1]])).multiply(J.mat).done()}function $(){J.refs=Math.max(J.refs-1,0)}function V(){J.refs=0}var ee=p.Complex.ZERO;function te(e){ee=e,j[0].value="".concat(e.re),j[1].value="".concat(e.im),D.classList.toggle("hidden",e.equals(0,0)),F.classList.toggle("hidden",e.equals(0,0)&&2===re),fe()}document.querySelectorAll("#center-controls form").forEach((function(e){e.addEventListener("submit",(function(e){var t=+j[0].value,n=+j[1].value;te((0,p.Complex)(t,n))}))})),D.addEventListener("click",(function(e){te(p.Complex.ZERO)}));var ne=0,re=2;function oe(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Pe();var n=(e=Math.max(e,0))/re;re=e,t&&(K(),G(n),Z(),$()),z.value="".concat(2/re),z.style.width="".concat(z.value.length,"ch"),_[1].disabled=2===re,F.classList.toggle("hidden",ee.equals(0,0)&&2===re),fe()}var ie=(0,s.default)(_,3),ae=ie[0],ue=ie[1],ce=ie[2];function se(){return[re*T.width/T.height,re]}function fe(){var e=(0,s.default)(se(),2),t=e[0],n=e[1],r=(0,p.Complex)(t,n),o=ee.sub(r),i=ee.add(r);M[0].textContent="".concat(o),M[1].textContent="".concat(i)}ae.addEventListener("click",(function(){return oe(re/2)})),ue.addEventListener("click",(function(){return oe(2)})),ce.addEventListener("click",(function(){return oe(2*re)})),F.addEventListener("click",(function(){var e=T.width,t=T.height,n=(0,s.default)(se(),2),r=n[0],o=n[1],i=[(e-1)/2,-(t-1)/2],a=i[0],u=i[1],c=[ee.re*a/r,ee.im*u/o],f=c[0],l=c[1];K(),W(f,l),Z(),$(),te(p.Complex.ZERO),oe(2)}));var le,de,pe,me,ve=function(e){return e};me=function(e,t,n){if(t===self.location.origin)return e;var r=n?"import "+JSON.stringify(e)+";":"importScripts("+JSON.stringify(e)+");";return URL.createObjectURL(new Blob([r],{type:"application/javascript"}))};var he=(xe=a("fQyQn")).getBundleURL("5Hjnn")+a("91UpR").resolve("dq1cl");pe=me(he,xe.getOrigin(he),!1);var ge=new Worker(pe);ge.postMessage(void 0);var ye,we=(xe=a("fQyQn")).getBundleURL("5Hjnn")+a("91UpR").resolve("egthy");ye=me(we,xe.getOrigin(we),!1);var be,xe,Ee,Ce=(xe=a("fQyQn")).getBundleURL("5Hjnn")+a("91UpR").resolve("ainsM");function Le(e){var t=e.pageX,n=e.pageY,r=t-T.offsetLeft,o=n-T.offsetTop,i=T.getBoundingClientRect(),a=i.width,u=i.height;if(!(r<0||r>=a||o<0||o>=u))return Fe(r,o)}be=me(Ce,xe.getOrigin(Ce),!1),ge.onmessage=(Ee=c(t(l).mark((function e(n){return t(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N.textContent="Initializing workers...",e.next=3,je();case 3:return de=n.data,le=de?new Worker(ye):new Worker(be),e.next=7,Te(le);case 7:le.onmessage=function(e){var t,n,r,o,i=e.data;i.graphID===ne&&("chunkDone"===i.action?(n=(t=i).chunk,r=t.buf,o=new ImageData(new Uint8ClampedArray(r),n.width,n.height),Y.putImageData(o,n.offx,n.offy)):"done"===i.action&&Xe(i.time))},le.onerror=Ke,I.disabled=!1,ge.terminate(),document.querySelectorAll(".initializing").forEach((function(e){return e.classList.remove("initializing")})),_e();case 13:case"end":return e.stop()}}),e)}))),function(e){return Ee.apply(this,arguments)});var Se=!1,Re=0,ke=0,qe=0,Ae=0;T.addEventListener("mousedown",(function(e){Se=!0,qe=Re=e.clientX,Ae=ke=e.clientY,K()})),document.addEventListener("mouseup",(function(e){if(Se){Se=!1;var t=[e.clientX-Re,e.clientY-ke];0===t[0]&&0===t[1]||_e()}})),document.addEventListener("mousemove",(function(e){if(Se){Pe();var t=[e.clientX-qe,e.clientY-Ae],n=t[0],r=t[1];W(n,r),Z(),te(ee.sub(Me(n,r))),qe=e.clientX,Ae=e.clientY}}));var Oe,He,Ie=!1;function Ne(){return Ue.apply(this,arguments)}function Ue(){return Ue=c(t(l).mark((function e(){var n,r,o,i,a,u,c,d,p=arguments;return t(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=p.length,r=new Array(n),o=0;o<n;o++)r[o]=p[o];void 0!==(i=Le.apply(void 0,(0,f.default)(r)))&&(a=(0,s.default)(U,2),u=a[0],c=a[1],u.textContent="".concat(i),c.textContent="".concat(null!==(d=null==ve?void 0:ve(i))&&void 0!==d?d:"?"));case 3:case"end":return e.stop()}}),e)}))),Ue.apply(this,arguments)}function _e(){return ze.apply(this,arguments)}function ze(){return(ze=c(t(l).mark((function e(){var n,r;return t(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I.disabled){e.next=2;break}return e.abrupt("return");case 2:return N.classList.remove("hidden","error","done"),N.textContent="Graphing...",e.next=6,B();case 6:return e.next=8,je();case 8:V(),Pe(),n=H.value,e.prev=11,r=k(n),ve="function"===r.type?r.f:function(){return r.f},Be(le,n),e.next=21;break;case 17:throw e.prev=17,e.t0=e.catch(11),Ke(e.t0),e.t0;case 21:case"end":return e.stop()}}),e,null,[[11,17]])})))).apply(this,arguments)}function je(){return De.apply(this,arguments)}function De(){return(De=c(t(l).mark((function e(){return t(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){requestAnimationFrame((function(){requestAnimationFrame((function(){return e()}))}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fe(e,t){var n=[(T.width-1)/2,(T.height-1)/2],r=n[0],o=n[1];return ee.add(Me(e-r,t-o))}function Me(e,t){var n=T.width,r=T.height,o=(0,s.default)(se(),2),i=o[0],a=o[1],u=[(n-1)/2,-(r-1)/2],c=u[0],f=u[1];return(0,p.Complex)(e*i/c,t*a/f)}function Te(e){return Ye.apply(this,arguments)}function Ye(){return(Ye=c(t(l).mark((function e(n){var r;return t(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={action:"init"},n.postMessage(r),e.abrupt("return",new Promise((function(e){n.onmessage=function(t){e()}})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Be(e,t){ne++,ne|=0;var n={action:"mainRequest",pev:Qe(t),cd:{width:T.width,height:T.height,center:[ee.re,ee.im],scale:re},graphID:ne};e.postMessage(n)}function Pe(){ne++,ne|=0}function Qe(e){var t=q.simplify(e),n=!1;return"OperatorNode"!=t.type||"divide"!=t.fn||isNaN(+t.args[0])||(t.args.reverse(),t=q.simplify(t),n=!0),{fstr:t.toString(),inverse:n}}function Xe(e){return Je.apply(this,arguments)}function Je(){return(Je=c(t(l).mark((function e(n){return t(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N.textContent="Done in ".concat(n,"ms."),N.classList.add("done"),e.next=4,je();case 4:Ze();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ke(e){var t=e instanceof ErrorEvent?e.message:e;N.classList.add("error"),N.textContent=String(t)}function Ze(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;setTimeout((function(){N.classList.contains("done")&&(N.classList.remove("done"),N.classList.add("hidden"))}),e)}function We(e,t,n){e[t]!==n&&(e[t]=n)}T.addEventListener("wheel",(function(e){if(e.preventDefault(),Pe(),clearTimeout(Oe),Ie||(Ie=!0,K()),e.ctrlKey)r=e.clientX,o=e.clientY,i=e.deltaY,a=Math.pow(2,.005*i),u=Fe(r,o),c=u.sub(ee),te(u.sub(c.mul(a))),oe(re*a,!1),G(a,[r,o]),Z();else{var t=.5*e.deltaX,n=.5*e.deltaY;W(t,n),Z(),te(ee.sub(Me(t,n)))}var r,o,i,a,u,c;Ne(e),Oe=setTimeout((function(){_e(),Ie=!1}),500)}),!1),T.addEventListener("mousemove",Ne),O.addEventListener("mousemove",Ne),document.addEventListener("click",Ne),window.addEventListener("resize",(function(e){void 0!==He&&clearTimeout(He),He=setTimeout(c(t(l).mark((function e(){return t(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),200)})),document.querySelector("form#zoom-form").addEventListener("submit",(function(){z.checkValidity()&&oe(2/+z.value)})),document.querySelectorAll("form.graph-submit").forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault(),_e()}))})),document.querySelectorAll("button.graph-submit").forEach((function(e){e.addEventListener("click",(function(){_e()}))}))}();
//# sourceMappingURL=complexgrapher.d7fda7fc.js.map
